/*
 * Based on CokeUtil, add more utility methods for YYM usage.
 *
 * See https://github.com/riotkkwok/CokeUtil for details
 *
 * Auther: Rio Kwok
 *
 */
!function(){var e,t={},r=window.navigator.userAgent;t.formatDate=function(e,t){function r(e,t){var r=i.indexOf(e);if(0>r)return"";for(var o=1;o<i.length&&i[r+o]===e;o++);i="M"===e?o>3?i.replace(i.substring(r,r+o),n[t-1]):3===o?i.replace(i.substring(r,r+o),n[t-1].substr(0,o)):i.replace(i.substring(r,r+o),("0"+t).toString().substr(-1*o)):"Y"===e?i.replace(i.substring(r,r+o),t.toString().substr(-1*o)):i.replace(i.substring(r,r+o),("0"+t).toString().substr(-1*o))}var n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=t,o={};if(!e instanceof Date){try{console.error("The argument 'date' is not a Date Object.")}catch(s){}return""}if("string"!=typeof t){try{console.error("The argument 'format' is not a string.")}catch(s){}return""}return o.year=e.getFullYear(),o.month=e.getMonth()+1,o.day=e.getDate(),o.hour=e.getHours(),o.minute=e.getMinutes(),o.second=e.getSeconds(),r("Y",o.year),r("D",o.day),r("h",o.hour),r("m",o.minute),r("s",o.second),r("M",o.month),i},t.compareVers=function(e,t){if("string"!=typeof e||"string"!=typeof t||0===e.length||0===t.length)return null;if(e===t)return 0;for(var r=e.split("."),n=t.split("."),i=0;i<r.length&&i<n.length;i++){if(parseInt(r[i],10)>parseInt(n[i],10))return 1;if(parseInt(r[i],10)<parseInt(n[i],10))return-1}return parseInt(r[i]||"0",10)>parseInt(n[i]||"0",10)?1:parseInt(r[i]||"0",10)<parseInt(n[i]||"0",10)?-1:0},t.getURLParam=function(t,r){var n=/(?:\?|&)([^&=]*)=?([^&]*)/g;return null===t||void 0===t||""===t?null:((r||!e)&&(e={},window.location.search.replace(n,function(){return arguments[1]&&(e[arguments[1]]=arguments[2]),""})),""===e[t]?null:e[t])},t.killKeyboard=function(){try{if(document.activeElement&&"body"!=document.activeElement.nodeName.toLowerCase())document.activeElement.blur();else for(var e=0;e<document.querySelectorAll("input, textarea, select").length;e++)document.querySelectorAll("input, textarea, select")[e].blur()}catch(t){}},t.userAgent={isIOS:/iPhone|iPod|iPad/i.test(r),isAndroid:/Android/i.test(r),isWeiXin:/MicroMessenger/i.test(r),isWeibo:/weibo/i.test(r),isYY:/.*YY/.test(r),isChrome:/chrome/i.test(r),isUCWEB:/UCWEB|UCBrowser/i.test(r),isOpera:/Opera|Oupeng/i.test(r),isFireFox:/Firefox/i.test(r),isQQBrowser:/MQQBrowser/i.test(r),is360Browser:/360 Aphone Browser/i.test(r),isLieBao:/LieBao/i.test(r),isBaiduBrowser:/baidubrowser/i.test(r),isIE:/(MSIE).*(Windows).*(Trident)?/i.test(r),isSmartis:/SANFRANCISCO/i.test(r)},t.UA={UCBrowser:/(UCBrowser|UCWEB)\/([0-9.]+)/.test(r)?RegExp.$2:!1,Chrome:/Chrome\/([0-9.]+)/.test(r)?RegExp.$1:!1,QQBrowser:/MQQBrowser\/([0-9.]+)/.test(r)?RegExp.$1:!1,QQ:/ QQ\/([0-9.]+)/.test(r)?RegExp.$1:!1,Safari:/Safari\/([0-9.]+)/.test(r)?RegExp.$1:!1,Weibo:/_webbo_([0-9.]+)/.test(r)?RegExp.$1:!1,Android:/Android (\d+\.\d+)/.test(r)?RegExp.$1:!1,IOS:/(iPhone|iPod|iPad).*OS (\d+)/.test(r)?RegExp.$2:!1,Weixin:/MicroMessenger\/([0-9.]+)/.test(r)?RegExp.$1:!1},t.Promise=function(e){var r=this;r.queue=[],r.current=0,r.isResolved=!1,r.then=function(e){return"function"==typeof e&&r.queue.push(e),r.isResolved&&e.apply(r),r},r.when=function(){function e(e){for(var t=0,i=0;i<n.length;i++)e===n[i]&&(n[i]=null),null===n[i]&&t++;t===n.length&&r.resolve()}for(var n=Array.prototype.slice.call(arguments),i=0;i<n.length;i++)n[i]instanceof t.Promise&&n[i].then(function(){var t=this;setTimeout(function(){e(t)},0)});return r},r.start=function(){var e=Array.prototype.slice.call(arguments);r.resolve.apply(r,e)},r.resolve=function(){var e=Array.prototype.slice.call(arguments);r.isResolved=!0,r.current!=r.queue.length&&(r.queue[r.current++].apply(r,e),r.resolve(e))},e&&r.then(e)},t.type=function(e){var t,r=Object.prototype.toString;return null==e?t=String(e):(t=r.call(e).toLowerCase(),t=t.substring(8,t.length-1)),t},t.isPlainObject=function(e){var t,r=this,n=Object.prototype.hasOwnProperty;if(!e||"object"!==r.type(e))return!1;if(e.constructor&&!n.call(e,"constructor")&&!n.call(e.constructor.prototype,"isPrototypeOf"))return!1;for(t in e);return void 0===t||n.call(e,t)},t.extend=function(){var e,t,r,n,i,o,s=this,u=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof u&&(c=u,u=arguments[1]||{},a=2),"object"!=typeof u&&"function"!==s.type(u)&&(u={}),l===a&&(u=this,--a);l>a;a++)if(null!=(e=arguments[a]))for(t in e)r=u[t],n=e[t],u!==n&&(c&&n&&(s.isPlainObject(n)||(i="array"===s.type(n)))?(i?(i=!1,o=r&&"array"===s.type(r)?r:[]):o=r&&s.isPlainObject(r)?r:{},u[t]=s.extend(c,o,n)):void 0!==n&&(u[t]=n));return u},t.getYYVersion=function(){var e=r.match(/.*YY([\/\(])?(ClientVersion:)?([0-9\.]+).*/);return e&&e[3]||0},t.getOSVersion=function(){var e;return e=this.userAgent.isIOS&&r.indexOf("OS ")>-1?r.substr(r.indexOf("OS ")+3,5).replace(/_/g,".").replace(/[^0-9.]/g,""):this.userAgent.isAndroid&&r.indexOf("Android ")>-1?r.substr(r.indexOf("Android ")+8,5).replace(/[^0-9.]/g,""):"unknown"},t.openApp=function(e){var t,r="yymobile://";if(null!=e&&(r=e.cmd||r,t="function"==typeof e.failureFunc?e.failureFunc:null),this.userAgent.isWeiXin)t&&t();else if(this.userAgent.isIOS)window.location.href=r;else if(this.userAgent.isAndroid){if(!/^4.4/.test(Util.getOSVersion())&&this.userAgent.isChrome)return void(t&&t());var n=document.createElement("iframe");n.src=r,n.style.display="none",document.body.appendChild(n),setTimeout(function(){document.body.removeChild(n)},1e3)}else t&&t()},"function"==typeof define&&define.amd?define("yymUtil",[],function(){return t}):window.yymUtil=window.CokeUtil=t}();
